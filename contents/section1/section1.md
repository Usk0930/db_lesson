# DBMSのアーキテクチャ

## データへのアクセス方法はどう決まるのか

クエリ
↓
パーサ ⇒SQLの構文を解析しDBMSが処理しやすい形式に変換（パース）
↓
オプティマイザ ⇒①実行計画を作成
↓
プラン計画

### ①実行計画とは

データへのアクセスの方法
カタログマネージャ（統計情報）を基に作成する
統計情報が適切でないと最適なプランが選ばれない

統計情報の構成要素例
- レコード数
- 列数
- 列のカーディナリティ
- NULL数
- インデックス情報

テーブルのデータが大きく更新されたら統計情報も更新する必要がある
が、innoDBでは下記の通り自動で更新される

```
テーブル内のデータが大幅に変更されたあとは、InnoDB によって自動的に永続的統計が再計算されます。
現在(5.6以降)のしきい値は、テーブル内の行の 10% です。
```

手動更新
```
ANALYZE TABLE <テーブル名>;
```

## 参考情報
[MySQLのEXPLAIN（実行プラン）まとめ](https://qiita.com/tsurumiii/items/0b70f1a1ee0499be2002)